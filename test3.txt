if (isset(f5)) {
  set.horizon(10);
  load.view(1);
  load.view(31);
  load.view(32);
  load.view(77);
  load.sound(42);
  load.sound(43);
  load.sound(3);
  load.pic(v0);
  load.logics(105);
  draw.pic(v0);
  animate.obj(o2);
  set.view(o2,32);
  set.loop(o2,0);
  if (v1 == 2) {
    set.cel(o2,0);
  }
  else {
    set.cel(o2,4);
    v32 = 2;
  }
  ignore.objs(o2);
  ignore.blocks(o2);
  set.priority(o2,4);
  position(o2,33,115);
  draw(o2);
  stop.cycling(o2);
  animate.obj(o3);
  set.view(o3,31);
  set.loop(o3,3);
  set.cel(o3,0);
  position(o3,69,44);
  draw(o3);
  stop.update(o3);
  animate.obj(o4);
  set.view(o4,32);
  set.loop(o4,1);
  if (v50 == 1) {
    set.cel(o4,1);
    position(o4,59,101);
  }
  else {
    set.cel(o4,0);
    position(o4,59,101);
  }
  set.priority(o4,4);
  draw(o4);
  stop.update(o4);
  animate.obj(o5);
  set.view(o5,77);
  if (isset(f97)) {
    set.cel(o5,1);
  }
  else {
    set.cel(o5,0);
  }
  ignore.blocks(o5);
  ignore.objs(o5);
  position(o5,114,105);
  draw(o5);
  stop.update(o5);
  add.to.pic(32,1,0,76,100,4,4);
  add.to.pic(32,1,0,93,101,4,4);
  if (v1 == 2) {
    animate.obj(o1);
    set.view(o1,31);
    set.loop(o1,0);
    set.cel(o1,0);
    set.priority(o1,4);
    position(o1,65,120);
    draw(o1);
    stop.cycling(o1);
    v31 = 1;
  }
  else {
    add.to.pic(31,1,1,65,120,4,4);
  }
  if (v1 == 2) {
    set.view(o0,31);
    set.loop(o0,1);
    fix.loop(o0);
    set.priority(o0,5);
    position(o0,65,155);
    v6 = 0;
    start.motion(o0);
    v30 = 18;
    program.control();
  }
  else {
    position(o0,33,116);
    v32 = 2;
  }
  draw(o0);
  ignore.blocks(o0);
  show.pic();
}
if (isset(f3)) {
  if ((v32 == 0 ||
      v32 == 3)) {
    start.update(o2);
    end.of.loop(o2,f31);
    sound(42,f61);
    v32 = 1;
  }
}
else {
  if ((v32 == 2 ||
      v32 == 1)) {
    start.update(o2);
    reverse.loop(o2,f31);
    sound(43,f61);
    v32 = 3;
    get.posn(o0,v70,v71);
    if (v70 < 28) {
      set(f32);
      start.motion(o0);
      program.control();
    }
  }
}
if (isset(f31)) {
  reset(f31);
  stop.update(o2);
  if (v32 == 1) {
    v32 = 2;
  }
  else {
    if (v32 == 3) {
      v32 = 0;
      if (isset(f32)) {
        new.room(4);
      }
    }
  }
}
if (v31 == 3 &&
    (isset(f33) ||
    isset(f65))) {
  sound(3,f33);
}
v30--;
if (v30 == 1) {
  if (v31 == 1) {
    end.of.loop(o1,f30);
  }
  if (v31 == 3) {
    reset(f59);
    release.loop(o0);
    stop.sound();
    set.view(o0,1);
    set.loop(o0,2);
    set.cel(o0,1);
    stop.cycling(o3);
    set.cel(o3,0);
    stop.update(o3);
    force.update(o3);
    reposition.to(o0,76,118);
    release.priority(o0);
    player.control();
    start.motion(o0);
    v31 = 4;
  }
  if (v31 == 2) {
    print("Stand by for decontamination.");
    reset(f50);
    start.cycling(o0);
    start.update(o3);
    start.cycling(o3);
    set(f59);
    sound(3,f33);
    v30 = 36;
    v31 = 3;
  }
}
if (isset(f30)) {
  reset(f30);
  if (v31 == 2) {
    add.to.pic(31,1,1,65,120,4,4);
    reposition.to(o0,76,118);
    set.loop(o0,2);
    set.cel(o0,0);
    program.control();
    v30 = 9;
  }
  if (v31 == 1) {
    erase(o1);
    set.cel(o0,0);
    move.obj(o0,65,120,0,f30);
    stop.cycling(o0);
    set(f50);
    v31 = 2;
  }
}
if ((said("check out","area") ||
    said("check out","airlock") ||
    said("check out","airlock","area") ||
    said("check out"))) {
  print("This is the airlock chamber. From here"
        "you can gain extra-vehicular access."
        "Spare suits hang on the back wall. Some"
        "lockers are mounted on the side wall.");
}
if ((said("acquire","attire") ||
    said("put on","attire") ||
    said("change","attire"))) {
  if (posn(o0,52,106,65,110)) {
    if (v50 == 1) {
      set.view(o0,0);
      set.cel(o4,0);
      force.update(o4);
      v50 = 2;
      get("dialect translator");
      get("order form");
      v3 += 1;
      if (isset(f58) &&
          !has("puzzle")) {
        get("puzzle");
        v3 += 1;
      }
      if (isset(f57) &&
          !has("supporter")) {
        get("supporter");
        v3 += 1;
      }
    }
    else {
      set.view(o0,1);
      set.cel(o4,1);
      force.update(o4);
      v50 = 1;
      v3 -= 1;
      drop("dialect translator");
      drop("order form");
      if (isset(f58)) {
        drop("puzzle");
        v3 -= 1;
      }
      if (isset(f57)) {
        drop("supporter");
        v3 -= 1;
      }
    }
  }
  else {
    if ((posn(o0,69,105,82,109) ||
        posn(o0,86,106,97,110))) {
      print("This one is not your size.");
    }
    else {
      print("You can't reach it from this position.");
    }
  }
}
if (said("empty","helmet")) {
  if (v50 == 1) {
    print("It's all attached. You have to change"
          "your suit.");
  }
  else {
    print("My, that could hurt.");
  }
}
if (said("explore","attire")) {
  if ((posn(o0,52,106,65,110) ||
      posn(o0,69,105,82,110))) {
    print("You find nothing.");
  }
  else {
    if (posn(o0,86,106,97,110)) {
      print("You find nothing.");
    }
    else {
      print("You'll need to get closer to the one"
            "you want to search.");
    }
  }
}
if ((said("check out","ceiling") ||
    said("check out","decontamination unit"))) {
  print("On the ceiling is mounted the"
        "decontamination mechanism. It cleans any"
        "unwanted matter from crewpersons entering"
        "the ship through the airlock. Otherwise,"
        "the ceiling is plain.");
}
if (said("acquire","condom")) {
  print("Sorry. The used Nancy Reagan autographed"
        "\"Just Say No\" condom had to be removed"
        "for the shipping version.");
}
if (said("check out","computer console")) {
  print("There are no controls here. All systems"
        "are monitored centrally elsewhere in the"
        "orbital station.");
}
if ((said("check out","deck") ||
    said("check out","circle"))) {
  print("The floor looks average except for the"
        "non-stationary disk in the middle which"
        "is composed of the two halves of the"
        "airlock port. It is currently closed.");
}
if (said("smell","attire")) {
  print("The suit smells as if the wearer's"
        "personal hygiene leaves something to be"
        "desired.");
}
if (said("open","cabinet")) {
  if (posn(o0,102,111,112,122)) {
    if (!isset(f97)) {
      set.cel(o5,1);
      force.update(o5);
      set(f97);
    }
    else {
      print("It's already open.");
    }
  }
  else {
    print("You'll need to get closer.");
  }
}
if (said("close","cabinet")) {
  if (posn(o0,102,111,112,122)) {
    if (isset(f97)) {
      set.cel(o5,0);
      force.update(o5);
      reset(f97);
    }
    else {
      print("It's already closed.");
    }
  }
  else {
    print("You'll need to get closer.");
  }
}
if (said("smell","cabinet")) {
  print("What, you haven't smelled enough mold,"
        "mildew, or fungus in your life?");
}
if (said("reach","cabinet")) {
  print("Just say what you want to get.");
}
if (isset(f97)) {
  if ((said("acquire","all") ||
      said("acquire","stuff") ||
      said("acquire","cabinet","stuff") ||
      said("acquire","stuff","cabinet"))) {
    if (posn(o0,102,111,112,122)) {
      if (v50 != 1) {
        if (isset(f57) &&
            isset(f58)) {
          print("There is nothing to get.");
        }
        else {
          print("Ok.");
          if (!isset(f57)) {
            v3 += 1;
            get("supporter");
            set(f57);
          }
          if (!isset(f58)) {
            v3 += 1;
            get("puzzle");
            set(f58);
          }
        }
      }
      else {
        print("You'll need to change suits first.");
      }
    }
    else {
      print("You'll need to get closer.");
    }
  }
  if (said("acquire","athletic supporter")) {
    if (posn(o0,102,111,112,122)) {
      if (!isset(f57)) {
        v3 += 1;
        print("Ok.");
        get("supporter");
        set(f57);
      }
      else {
        print("You've already performed that act.");
      }
    }
    else {
      print("You'll need to get closer.");
    }
  }
  if (said("acquire","cube")) {
    if (posn(o0,102,111,112,122)) {
      if (!isset(f58)) {
        print("Ok.");
        get("puzzle");
        set(f58);
        v3 += 1;
      }
      else {
        print("You've already performed that act.");
      }
    }
    else {
      print("You'll need to get closer.");
    }
  }
  if ((said("check out","cabinet") ||
      said("look in","cabinet"))) {
    if (posn(o0,102,111,112,122)) {
      if (!isset(f57) &&
          !isset(f58)) {
        print("%m21 a cubix rube puzzle and your"
              "athletic supporter.");
      }
      else {
        if (!isset(f57)) {
          print("%m21 your athletic supporter.");
        }
        else {
          if (!isset(f58)) {
            print("%m21 a cubix rube puzzle.");
          }
          else {
            print("%m21 it empty. You can only"
                  "wonder what left behind such a"
                  "foul fragrance.");
          }
        }
      }
    }
    else {
      print("You'll need to get closer.");
    }
  }
}
if (said("check out","cabinet")) {
  print("The lockers are all closed. There is"
        "nothing too interesting about them.");
}
if (said("look in","cabinet")) {
  print("You'll need x-ray vision for that since"
        "they are closed.");
}
if ((said("climb in","outside") ||
    said("climb out","craft"))) {
  print("You can't go back outside. You are"
        "expected in the shuttle bay.");
}
if ((said("acquire","communicator","attire") ||
    said("empty","communicator") ||
    said("press","communicator","button") ||
    said("empty","communicator","attire"))) {
  print("It is permanently attached to the EVA"
        "suit. You will find it useless inside.");
}
if ((said("use","communicator") ||
    said("check out","communicator"))) {
  if (v50 == 1) {
    print("It is permanently attached to the EVA"
          "suit. You will find it useless inside.");
  }
  else {
    print("You don't own one.");
  }
}
if (said("open","door")) {
  print("%m34 Just walk on through the other door.");
}
if (said("open","airlock")) {
  print("You can't open the airlock.");
}
call(105);
return();

// Messages
#message 1 "Stand by for decontamination."
#message 2 "You can't reach it from this position."
#message 3 "This is the airlock chamber. From here you can gain extra-vehicular access. Spare suits hang on the back wall. Some lockers are mounted on the side wall."
#message 4 "This one is not your size."
#message 5 "On the ceiling is mounted the decontamination mechanism. It cleans any unwanted matter from crewpersons entering the ship through the airlock. Otherwise, the ceiling is plain."
#message 7 "You find nothing."
#message 8 "You'll need to get closer to the one you want to search."
#message 9 "There are no controls here. All systems are monitored centrally elsewhere in the orbital station."
#message 12 "The floor looks average except for the non-stationary disk in the middle which is composed of the two halves of the airlock port. It is currently closed."
#message 13 "The suit smells as if the wearer's personal hygiene leaves something to be desired."
#message 14 "It's already open."
#message 15 "You'll need to get closer."
#message 16 "It's already closed."
#message 17 "Ok."
#message 18 "The lockers are all closed. There is nothing too interesting about them."
#message 19 "You'll need x-ray vision for that since they are closed."
#message 20 "You open the only locker for which you have a combination. Phew! Putrid waves of stench waft forth. You can't recall the last cleaning it received."
#message 21 "You bravely peer into the locker to find"
#message 22 "%m21 a cubix rube puzzle and your athletic supporter."
#message 23 "%m21 your athletic supporter."
#message 24 "%m21 a cubix rube puzzle."
#message 25 "%m21 it empty. You can only wonder what left behind such a foul fragrance."
#message 26 "There is nothing to get."
#message 27 "You've already performed that act."
#message 28 "It is permanently attached to the EVA suit. You will find it useless inside."
#message 29 "Sorry. The used Nancy Reagan autographed \"Just Say No\" condom had to be removed for the shipping version."
#message 30 "You can't go back outside. You are expected in the shuttle bay."
#message 31 "My, that could hurt."
#message 32 "It's all attached. You have to change your suit."
#message 33 "You don't own one."
#message 34 "You can't open the airlock."
#message 35 "%m34 Just walk on through the other door."
#message 36 "What, you haven't smelled enough mold, mildew, or fungus in your life?"
#message 37 "Just say what you want to get."
#message 38 "You'll need to change suits first."
